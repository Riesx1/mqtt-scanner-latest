listener 8883
allow_anonymous false
password_file /mosquitto/config/passwordfile

# ACL Configuration - Topic Access Control (DISABLED - Authentication only)
# acl_file /mosquitto/config/aclfile

# TLS/SSL Configuration
certfile /mosquitto/certs/server.crt
keyfile /mosquitto/certs/server.key
require_certificate false
tls_version tlsv1.2

# DoS Protection - Connection and Message Limits
max_connections 100
max_inflight_messages 20
max_queued_messages 100
message_size_limit 1048576
max_keepalive 300

# Persistence
persistence true
persistence_location /mosquitto/data/
persistent_client_expiration 1h

# Logging
log_dest file /mosquitto/log/mosquitto.log
log_dest stdout
log_type all
connection_messages true
log_timestamp true
log_timestamp_format %Y-%m-%dT%H:%M:%S
